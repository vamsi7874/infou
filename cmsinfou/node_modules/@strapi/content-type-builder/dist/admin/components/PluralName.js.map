{"version":3,"file":"PluralName.js","sources":["../../../admin/src/components/PluralName.tsx"],"sourcesContent":["import { useEffect, useRef } from 'react';\n\nimport { Field, TextInput } from '@strapi/design-system';\nimport pluralize from 'pluralize';\nimport { useIntl } from 'react-intl';\n\nimport { nameToSlug } from '../utils/nameToSlug';\n\nimport type { IntlLabel } from '../types';\n\ninterface Description {\n  id: string;\n  defaultMessage: string;\n  values?: Record<string, any>;\n}\n\ninterface PluralNameProps {\n  description?: Description;\n  error?: string;\n  intlLabel: IntlLabel;\n  modifiedData: Record<string, any>;\n  name: string;\n  onChange: (value: { target: { name: string; value: string } }) => void;\n  value?: string;\n}\n\nexport const PluralName = ({\n  description,\n  error,\n  intlLabel,\n  modifiedData,\n  name,\n  onChange,\n  value,\n}: PluralNameProps) => {\n  const { formatMessage } = useIntl();\n  const onChangeRef = useRef(onChange);\n  const displayName = modifiedData?.displayName || '';\n  const previousDisplayName = useRef(displayName);\n  const previousValue = useRef(value);\n\n  useEffect(() => {\n    if (displayName && displayName !== previousDisplayName.current) {\n      const baseValue = nameToSlug(displayName);\n      let newValue = baseValue;\n\n      try {\n        newValue = pluralize(baseValue, 2);\n      } catch (err) {\n        // If pluralize fails, use the base value\n      }\n\n      onChangeRef.current({ target: { name, value: newValue } });\n      previousValue.current = newValue;\n      previousDisplayName.current = displayName;\n    } else if (!displayName) {\n      onChangeRef.current({ target: { name, value: '' } });\n      previousValue.current = '';\n      previousDisplayName.current = '';\n    }\n  }, [displayName, name, value]);\n\n  const errorMessage = error ? formatMessage({ id: error, defaultMessage: error }) : '';\n  const hint = description\n    ? formatMessage(\n        { id: description.id, defaultMessage: description.defaultMessage },\n        { ...description.values }\n      )\n    : '';\n  const label = formatMessage(intlLabel);\n\n  return (\n    <Field.Root error={errorMessage} hint={hint} name={name}>\n      <Field.Label>{label}</Field.Label>\n      <TextInput onChange={onChange} value={value || ''} />\n      <Field.Error />\n    </Field.Root>\n  );\n};\n"],"names":["PluralName","description","error","intlLabel","modifiedData","name","onChange","value","formatMessage","useIntl","onChangeRef","useRef","displayName","previousDisplayName","previousValue","useEffect","current","baseValue","nameToSlug","newValue","pluralize","err","target","errorMessage","id","defaultMessage","hint","values","label","_jsxs","Field","Root","_jsx","Label","TextInput","Error"],"mappings":";;;;;;;;;MA0BaA,UAAa,GAAA,CAAC,EACzBC,WAAW,EACXC,KAAK,EACLC,SAAS,EACTC,YAAY,EACZC,IAAI,EACJC,QAAQ,EACRC,KAAK,EACW,GAAA;IAChB,MAAM,EAAEC,aAAa,EAAE,GAAGC,iBAAAA,EAAAA;AAC1B,IAAA,MAAMC,cAAcC,YAAOL,CAAAA,QAAAA,CAAAA;IAC3B,MAAMM,WAAAA,GAAcR,cAAcQ,WAAe,IAAA,EAAA;AACjD,IAAA,MAAMC,sBAAsBF,YAAOC,CAAAA,WAAAA,CAAAA;AACnC,IAAA,MAAME,gBAAgBH,YAAOJ,CAAAA,KAAAA,CAAAA;IAE7BQ,eAAU,CAAA,IAAA;AACR,QAAA,IAAIH,WAAeA,IAAAA,WAAAA,KAAgBC,mBAAoBG,CAAAA,OAAO,EAAE;AAC9D,YAAA,MAAMC,YAAYC,qBAAWN,CAAAA,WAAAA,CAAAA;AAC7B,YAAA,IAAIO,QAAWF,GAAAA,SAAAA;YAEf,IAAI;AACFE,gBAAAA,QAAAA,GAAWC,UAAUH,SAAW,EAAA,CAAA,CAAA;AAClC,aAAA,CAAE,OAAOI,GAAK,EAAA;;AAEd;AAEAX,YAAAA,WAAAA,CAAYM,OAAO,CAAC;gBAAEM,MAAQ,EAAA;AAAEjB,oBAAAA,IAAAA;oBAAME,KAAOY,EAAAA;AAAS;AAAE,aAAA,CAAA;AACxDL,YAAAA,aAAAA,CAAcE,OAAO,GAAGG,QAAAA;AACxBN,YAAAA,mBAAAA,CAAoBG,OAAO,GAAGJ,WAAAA;SACzB,MAAA,IAAI,CAACA,WAAa,EAAA;AACvBF,YAAAA,WAAAA,CAAYM,OAAO,CAAC;gBAAEM,MAAQ,EAAA;AAAEjB,oBAAAA,IAAAA;oBAAME,KAAO,EAAA;AAAG;AAAE,aAAA,CAAA;AAClDO,YAAAA,aAAAA,CAAcE,OAAO,GAAG,EAAA;AACxBH,YAAAA,mBAAAA,CAAoBG,OAAO,GAAG,EAAA;AAChC;KACC,EAAA;AAACJ,QAAAA,WAAAA;AAAaP,QAAAA,IAAAA;AAAME,QAAAA;AAAM,KAAA,CAAA;IAE7B,MAAMgB,YAAAA,GAAerB,QAAQM,aAAc,CAAA;QAAEgB,EAAItB,EAAAA,KAAAA;QAAOuB,cAAgBvB,EAAAA;KAAW,CAAA,GAAA,EAAA;IACnF,MAAMwB,IAAAA,GAAOzB,cACTO,aACE,CAAA;AAAEgB,QAAAA,EAAAA,EAAIvB,YAAYuB,EAAE;AAAEC,QAAAA,cAAAA,EAAgBxB,YAAYwB;KAClD,EAAA;AAAE,QAAA,GAAGxB,YAAY0B;KAEnB,CAAA,GAAA,EAAA;AACJ,IAAA,MAAMC,QAAQpB,aAAcL,CAAAA,SAAAA,CAAAA;IAE5B,qBACE0B,eAAA,CAACC,mBAAMC,IAAI,EAAA;QAAC7B,KAAOqB,EAAAA,YAAAA;QAAcG,IAAMA,EAAAA,IAAAA;QAAMrB,IAAMA,EAAAA,IAAAA;;AACjD,0BAAA2B,cAAA,CAACF,mBAAMG,KAAK,EAAA;AAAEL,gBAAAA,QAAAA,EAAAA;;0BACdI,cAACE,CAAAA,sBAAAA,EAAAA;gBAAU5B,QAAUA,EAAAA,QAAAA;AAAUC,gBAAAA,KAAAA,EAAOA,KAAS,IAAA;;AAC/C,0BAAAyB,cAAA,CAACF,mBAAMK,KAAK,EAAA,EAAA;;;AAGlB;;;;"}