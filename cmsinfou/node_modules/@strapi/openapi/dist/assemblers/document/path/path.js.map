{"version":3,"file":"path.js","sources":["../../../../src/assemblers/document/path/path.ts"],"sourcesContent":["import { PathContextFactory } from '../../../context';\n\nimport type { DocumentContext } from '../../../types';\n\nimport { createDebugger } from '../../../utils';\n\nimport type { Assembler } from '../..';\n\nconst debug = createDebugger('assembler:paths');\n\nexport class DocumentPathsAssembler implements Assembler.Assembler {\n  private readonly _assemblers: Assembler.Path[];\n\n  private readonly _contextFactory: PathContextFactory;\n\n  constructor(assemblers: Assembler.Path[], _contextFactory: PathContextFactory) {\n    this._assemblers = assemblers;\n    this._contextFactory = _contextFactory;\n  }\n\n  assemble(context: DocumentContext): void {\n    const { output, ...defaultContextProps } = context;\n\n    debug(`assembling document's paths for %O routes...`, defaultContextProps.routes.length);\n\n    const pathContext = this._contextFactory.create(defaultContextProps);\n\n    for (const assembler of this._assemblers) {\n      assembler.assemble(pathContext);\n    }\n\n    const { data: pathsObject } = pathContext.output;\n    const nbUniquePaths = Object.keys(pathsObject).length;\n\n    debug(`document's paths assembled, added %O unique paths`, nbUniquePaths);\n\n    output.data.paths = pathsObject;\n  }\n}\n"],"names":["debug","createDebugger","DocumentPathsAssembler","assemble","context","output","defaultContextProps","routes","length","pathContext","_contextFactory","create","assembler","_assemblers","data","pathsObject","nbUniquePaths","Object","keys","paths","constructor","assemblers"],"mappings":";;;;;;AAQA,MAAMA,QAAQC,sBAAe,CAAA,iBAAA,CAAA;AAEtB,MAAMC,sBAAAA,CAAAA;AAUXC,IAAAA,QAAAA,CAASC,OAAwB,EAAQ;AACvC,QAAA,MAAM,EAAEC,MAAM,EAAE,GAAGC,qBAAqB,GAAGF,OAAAA;AAE3CJ,QAAAA,KAAAA,CAAM,CAAC,4CAA4C,CAAC,EAAEM,mBAAoBC,CAAAA,MAAM,CAACC,MAAM,CAAA;AAEvF,QAAA,MAAMC,cAAc,IAAI,CAACC,eAAe,CAACC,MAAM,CAACL,mBAAAA,CAAAA;AAEhD,QAAA,KAAK,MAAMM,SAAAA,IAAa,IAAI,CAACC,WAAW,CAAE;AACxCD,YAAAA,SAAAA,CAAUT,QAAQ,CAACM,WAAAA,CAAAA;AACrB;AAEA,QAAA,MAAM,EAAEK,IAAMC,EAAAA,WAAW,EAAE,GAAGN,YAAYJ,MAAM;AAChD,QAAA,MAAMW,aAAgBC,GAAAA,MAAAA,CAAOC,IAAI,CAACH,aAAaP,MAAM;QAErDR,KAAM,CAAA,CAAC,iDAAiD,CAAC,EAAEgB,aAAAA,CAAAA;QAE3DX,MAAOS,CAAAA,IAAI,CAACK,KAAK,GAAGJ,WAAAA;AACtB;IAtBAK,WAAYC,CAAAA,UAA4B,EAAEX,eAAmC,CAAE;QAC7E,IAAI,CAACG,WAAW,GAAGQ,UAAAA;QACnB,IAAI,CAACX,eAAe,GAAGA,eAAAA;AACzB;AAoBF;;;;"}