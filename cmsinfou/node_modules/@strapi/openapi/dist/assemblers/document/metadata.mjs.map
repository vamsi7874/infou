{"version":3,"file":"metadata.mjs","sources":["../../../src/assemblers/document/metadata.ts"],"sourcesContent":["import type { DocumentContext } from '../../types';\n\nimport { createDebugger } from '../../utils';\n\nimport type { Assembler } from '..';\n\nconst debug = createDebugger('assembler:metadata');\n\nexport class DocumentMetadataAssembler implements Assembler.Document {\n  assemble(context: DocumentContext): void {\n    const { strapi } = context;\n\n    const strapiVersion = strapi.config.get<string>('info.strapi');\n\n    debug(`assembling document's metadata for %O...`, { strapiVersion });\n\n    const metadata = new Map<string, unknown>()\n      .set('openapi', '3.1.0')\n      .set('x-powered-by', 'strapi')\n      .set('x-strapi-version', strapiVersion);\n\n    const metadataObject = Object.fromEntries(metadata);\n\n    debug(`document's metadata assembled: %O`, metadataObject);\n\n    Object.assign(context.output.data, metadataObject);\n  }\n}\n"],"names":["debug","createDebugger","DocumentMetadataAssembler","assemble","context","strapi","strapiVersion","config","get","metadata","Map","set","metadataObject","Object","fromEntries","assign","output","data"],"mappings":";;;;AAMA,MAAMA,QAAQC,cAAe,CAAA,oBAAA,CAAA;AAEtB,MAAMC,yBAAAA,CAAAA;AACXC,IAAAA,QAAAA,CAASC,OAAwB,EAAQ;QACvC,MAAM,EAAEC,MAAM,EAAE,GAAGD,OAAAA;AAEnB,QAAA,MAAME,aAAgBD,GAAAA,MAAAA,CAAOE,MAAM,CAACC,GAAG,CAAS,aAAA,CAAA;QAEhDR,KAAM,CAAA,CAAC,wCAAwC,CAAC,EAAE;AAAEM,YAAAA;AAAc,SAAA,CAAA;AAElE,QAAA,MAAMG,QAAW,GAAA,IAAIC,GAClBC,EAAAA,CAAAA,GAAG,CAAC,SAAA,EAAW,OACfA,CAAAA,CAAAA,GAAG,CAAC,cAAA,EAAgB,QACpBA,CAAAA,CAAAA,GAAG,CAAC,kBAAoBL,EAAAA,aAAAA,CAAAA;QAE3B,MAAMM,cAAAA,GAAiBC,MAAOC,CAAAA,WAAW,CAACL,QAAAA,CAAAA;QAE1CT,KAAM,CAAA,CAAC,iCAAiC,CAAC,EAAEY,cAAAA,CAAAA;AAE3CC,QAAAA,MAAAA,CAAOE,MAAM,CAACX,OAAAA,CAAQY,MAAM,CAACC,IAAI,EAAEL,cAAAA,CAAAA;AACrC;AACF;;;;"}